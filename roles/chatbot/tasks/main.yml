---

# Prepare directories
- name: chatbot | Create directories
  file:
    path: '{{ item }}'
    state: directory
    owner: '{{ user }}'
    group: '{{ group }}'
  with_items:
    - '{{ chatbot_docker_dir }}'
    - '{{ chatbot_config_dir }}'
    - '{{ chatbot_env_dir }}'

- name: chatbot | Copy tokens.yml file
  copy:
    src: config/tokens.yml
    dest: '{{ chatbot_config_dir }}'

- name: chatbot | Create plugin config folders
  file:
    path: '{{ item }}'
    state: directory
    owner: '{{ user }}'
    group: '{{ group }}'
  with_items:
    - '{{ chatbot_config_dir }}/err-rss'
    - '{{ chatbot_config_dir }}/err-sponsors'
    #- '{{ chatbot_config_dir }}/err-gdrive'

- name: chatbot | Copy err-rss plugin config files
  copy:
    src: 'config/err-rss/{{ item.src }}'
    dest: '{{ chatbot_config_dir }}/err-rss/{{ item.dest }}'
  with_items:
    - { src: 'err-rss-vault.ini', dest: 'err-rss.ini' }

- name: chatbot | Copy err-sponsors plugin config files
  copy:
    src: 'config/err-sponsors/{{ item.src }}'
    dest: '{{ chatbot_config_dir }}/err-sponsors/{{ item.dest }}'
  with_items:
    - { src: 'google_api_key.json', dest: 'google_api_key.json' }
    - { src: 'sponsor_agreement_template_eps-vault.tex', dest: 'sponsor_agreement_template_eps-vault.tex' }

# - name: chatbot | Copy err-gdrive plugin config files
#   copy:
#     src: 'config/err-gdrive/{{ item.src }}'
#     dest: '{{ chatbot_config_dir }}/err-gdrive/{{ item.dest }}'
#   with_items:
#     - { src: 'client_secrets.json', dest: 'client_secrets.json' }
#     - { src: 'pydrive_settings.yml', dest: 'pydrive_settings.yml' }



# - include: docker.yml
#   tags: chatbot_docker
